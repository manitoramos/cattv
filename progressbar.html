<!DOCTYPE html>
<html>
<head>
	<title>teste upload</title>
	<link href="assets/bootstrap-3.3.0/dist/css/bootstrap.css" rel="stylesheet">
	
    <!-- JS -->
    <script src='assets/js/jquery2.1.3.js'></script>
    <script src="http://malsup.github.com/jquery.form.js"></script> 
    <script src="assets/bootstrap-3.3.0/dist/js/bootstrap.js"></script>
</head>
<body style="background-color: black; color:white;">
	<div class="container">
		<div class="row">
			<form id="openloadform">
			<div class="col-md-12">
			  File: <input type="file" name="file" id="oepnupload" multiple><br>
			</div>
			<div class="col-md-12">
			  <input style="color:black;" type="submit" value="Submit">
			 </div>
			  <div class="col-md-4">
				  <div class="progress">
				  	<div class="progress-bar progress-bar-success progress-bar-striped" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
				  </div>
			  </div>
			</form>
				<form id="openloadform2">
					File 2: <input type="file" name="file2" id="oepnupload2"><br>
				</form>
		</div>
	</div>





	<script>
		/*var count = 0;
		$('#openloadform').submit(function(e){
			e.preventDefault();
		$('input[type="file"]').on('ajax', function(){
		  var $this = $(this);
		  if (typeof this.files[count] === 'undefined') { return false; }

		  $.ajax({
		  	url: 'https://1fiafqi.oloadcdn.net/uls/cMcTWASgVlAdZ-oN',
		    'type':'POST',
		    method: "POST",
		    cache: false,
		    'data': (new FormData()).append('file', this.files[count]),
		    'contentType': false,
		    'processData': false,
		    'xhr': function() {  
		       var xhr = $.ajaxSettings.xhr();
		       if(xhr.upload){ 
		         xhr.upload.addEventListener('progress', progressbar, false);
		       }
		       return xhr;
		     },
		    'success': function(){
		       count++;
		       $this.trigger('ajax');
		    }
		  });
		}).trigger('ajax');
	})*/







		$(document).ready(function(){
			//$('.progress-bar').width('10%');
			$('#openloadform').submit(function(e){
				var count = 0;
				if($('#oepnupload').val()){
					e.preventDefault();
					$(this).ajaxSubmit({
						url: "https://1fiafqi.oloadcdn.net/uls/cMcTWASgVlAdZ-oN",
						type: "POST",
						method: "POST",
						data: (new FormData()).append('file', this.files[count]),
						contentType: false,
						cache: false,
						processData:false,
						beforeSubmit: function(){
							$('.progress-bar').width('0%')
						},
						uploadProgress: function(event, position, total, percentComplete){
							$('.progress-bar').width(percentComplete+'%')
							$('.progress-bar').html('<div id="progress-status">'+percentComplete+'%</div>')
						},
						success: function(data){
							count++;
							console.log(data);
							secuploadteste();
						},
						error: function(data){
							console.log(data);
						},
						resetForm: true
					})
					//console.log('meke');
					return false
					/*$.ajax({
						beforeSubmit: function(){
							$('.progress-bar').width('0%')
						},
						uploadProgress: function(event, position, total, percentComplete){
							$('.progress-bar').width(percentComplete+'%')
							$('.progress-bar').html('<div id="progress-status"'+percentComplete+'$<div>')
						},
				      url: "https://1fiafqi.oloadcdn.net/uls/cMcTWASgVlAdZ-oN",
				      type: "POST",
				      method: "POST",
				      data:  new FormData(this),
				      contentType: false,
				      cache: false,
				      processData:false,
				      success: function(data)
				      {
				         console.log(data);
				     	}
				    })*/

				    /*EXEMPLO DE COMO DEVE DAR IGUAL AO OUTRO
				    $.ajax({
        url: 'start-timer.php',
        type: 'POST',
        context: this,
        success: function() { this.submit(); },
      });
      return false;
				    */
				}
			})
		})
	</script>

</body>
</html>